{"version":3,"sources":["file:///home/heuzef/GIT/xp/xp/themes/hugo-narrow/assets/js/gallery.js"],"sourcesContent":["/**\n * 模块化图片画廊系统 - 重构版\n * 使用 SmartGallery + PhotoSwipe 5\n */\n\n// PhotoSwipe 灯箱管理器\nclass PhotoSwipeLightboxManager {\n  constructor(config = {}) {\n    this.config = config;\n    this.lightboxInstances = new Map();\n  }\n\n  async initialize(galleryId, items) {\n    if (typeof PhotoSwipeLightbox === 'undefined') {\n      console.error('PhotoSwipe Lightbox is not available');\n      return null;\n    }\n\n    const options = {\n      gallerySelector: `#${galleryId}`,\n      dataSource: items,\n      pswpModule: () =\u003e {\n        return new Promise((resolve) =\u003e {\n          if (window.PhotoSwipe) {\n            resolve(window.PhotoSwipe);\n          } else {\n            console.error('PhotoSwipe core module not loaded');\n            resolve(null);\n          }\n        });\n      },\n      ...this.config\n    };\n\n    const lightbox = new PhotoSwipeLightbox(options);\n    lightbox.init();\n\n    this.lightboxInstances.set(galleryId, lightbox);\n    return lightbox;\n  }\n\n  destroy() {\n    this.lightboxInstances.forEach(lightbox =\u003e {\n      if (lightbox \u0026\u0026 lightbox.destroy) {\n        lightbox.destroy();\n      }\n    });\n    this.lightboxInstances.clear();\n  }\n}\n\n// SmartGallery 布局管理器\nclass SmartGalleryLayoutManager {\n  constructor(config = {}) {\n    this.config = config;\n    this.instances = new Map();\n  }\n\n  initialize(container, items, layout) {\n    if (typeof SmartGallery === 'undefined') {\n      console.error('SmartGallery is not available');\n      return null;\n    }\n\n    const options = {\n      layout: layout || this.config.defaultLayout || this.config.defaultlayout || 'justified',\n      gap: this.config.gap !== undefined ? parseInt(this.config.gap) : 10,\n      targetRowHeight: this.config.targetRowHeight !== undefined ? parseInt(this.config.targetRowHeight) : (this.config.targetrowheight !== undefined ? parseInt(this.config.targetrowheight) : 300),\n      lastRowBehavior: this.config.lastRowBehavior || this.config.lastrowbehavior || 'left',\n      columnWidth: this.config.columnWidth !== undefined ? parseInt(this.config.columnWidth) : (this.config.columnwidth !== undefined ? parseInt(this.config.columnwidth) : 300),\n      columns: this.config.columns !== undefined ? this.config.columns : 'auto',\n     placeholderColor: 'transparent',\n      onItemClick: ({ index, event }) =\u003e {\n        if (event \u0026\u0026 event.target.closest('.layout-btn')) {\n          return;\n        }\n        const galleryId = container.id.replace('gallery-inner-', 'gallery-');\n        this.triggerLightbox(galleryId, index);\n      }\n    };\n\n    const gallery = new SmartGallery(container, options);\n    gallery.addItems(items);\n    gallery.render();\n\n    this.instances.set(container.id, {\n      gallery,\n      container,\n      items,\n      currentLayout: options.layout\n    });\n\n    return gallery;\n  }\n\n  switchLayout(galleryId, newLayout) {\n    const instance = this.instances.get(galleryId);\n    if (!instance) return;\n\n    instance.gallery.destroy();\n    this.initialize(instance.container, instance.items, newLayout);\n  }\n\n  triggerLightbox(galleryId, index) {\n    const event = new CustomEvent('gallery:openLightbox', {\n      detail: { galleryId, index }\n    });\n    window.dispatchEvent(event);\n  }\n\n  destroy() {\n    this.instances.forEach(({ gallery }) =\u003e {\n      if (gallery \u0026\u0026 gallery.destroy) {\n        gallery.destroy();\n      }\n    });\n    this.instances.clear();\n  }\n}\n\n\n// 主画廊控制器\nclass ImageGallery {\n  constructor() {\n    const rawConfig = window.HUGO_GALLERY_CONFIG || {};\n\n    // 解析 JSON 字符串配置\n    let galleryOptions = rawConfig.galleryOptions || {};\n    let lightboxOptions = rawConfig.lightboxOptions || {};\n\n    if (typeof galleryOptions === 'string') {\n      try {\n        galleryOptions = JSON.parse(galleryOptions);\n      } catch (e) {\n        console.error('Failed to parse galleryOptions:', e);\n        galleryOptions = {};\n      }\n    }\n\n    if (typeof lightboxOptions === 'string') {\n      try {\n        lightboxOptions = JSON.parse(lightboxOptions);\n      } catch (e) {\n        console.error('Failed to parse lightboxOptions:', e);\n        lightboxOptions = {};\n      }\n    }\n\n    this.config = {\n      gallery: rawConfig.gallery,\n      lightbox: rawConfig.lightbox,\n      galleryOptions,\n      lightboxOptions\n    };\n\n    this.layoutManager = new SmartGalleryLayoutManager(this.config.galleryOptions || {});\n    this.lightboxManager = new PhotoSwipeLightboxManager(this.config.lightboxOptions || {});\n    this.galleries = [];\n    this.init();\n  }\n\n  init() {\n    if (document.readyState === 'loading') {\n      document.addEventListener('DOMContentLoaded', () =\u003e this.setup());\n    } else {\n      this.setup();\n    }\n  }\n\n  setup() {\n    this.processImages();\n    this.setupEventListeners();\n  }\n\n  setupEventListeners() {\n    window.addEventListener('gallery:openLightbox', (e) =\u003e {\n      const { galleryId, index } = e.detail;\n      const gallery = this.galleries.find(g =\u003e g.id === galleryId);\n      if (gallery \u0026\u0026 gallery.lightbox) {\n        gallery.lightbox.loadAndOpen(index);\n      }\n    });\n  }\n\n  processImages() {\n    const imageFigures = document.querySelectorAll('.image-figure[data-gallery-type=\"auto\"]');\n    if (imageFigures.length === 0) return;\n\n    const groups = this.detectImageGroups(imageFigures);\n\n    // 使用 async/await 处理异步初始化\n    groups.forEach(async (group, index) =\u003e {\n      if (group.length \u003e 1 \u0026\u0026 this.config.gallery) {\n        await this.createGalleryGroup(group, index);\n      } else {\n        this.processIndividualImages(group);\n      }\n    });\n  }\n\n  detectImageGroups(figures) {\n    const groups = [];\n    let currentGroup = [];\n\n    for (let i = 0; i \u003c figures.length; i++) {\n      const figure = figures[i];\n      const nextFigure = figures[i + 1];\n\n      currentGroup.push(figure);\n\n      if (nextFigure \u0026\u0026 this.areConsecutiveByEmptyLine(figure, nextFigure)) {\n        continue;\n      } else {\n        if (currentGroup.length \u003e 0) {\n          groups.push([...currentGroup]);\n          currentGroup = [];\n        }\n      }\n    }\n\n    if (currentGroup.length \u003e 0) {\n      groups.push([...currentGroup]);\n    }\n\n    return groups;\n  }\n\n  areConsecutiveByEmptyLine(figure1, figure2) {\n    let current = figure1.nextElementSibling;\n\n    while (current \u0026\u0026 current !== figure2) {\n      if (current.nodeType === Node.TEXT_NODE) {\n        const text = current.textContent.trim();\n        if (text === '') {\n          current = current.nextElementSibling;\n          continue;\n        }\n        return false;\n      }\n\n      if (current.nodeType === Node.ELEMENT_NODE) {\n        if (current.matches('.image-figure')) {\n          current = current.nextElementSibling;\n          continue;\n        }\n\n        const tagName = current.tagName.toLowerCase();\n        const text = current.textContent.trim();\n\n        if (tagName === 'p' \u0026\u0026 text === '') {\n          return false;\n        } else if (tagName === 'br') {\n          current = current.nextElementSibling;\n          continue;\n        } else if (text !== '') {\n          return false;\n        }\n        current = current.nextElementSibling;\n      }\n    }\n\n    return current === figure2;\n  }\n\n  async createGalleryGroup(figures, groupIndex) {\n    const galleryContainer = document.createElement('div');\n    galleryContainer.className = 'smart-gallery-container';\n    galleryContainer.id = `gallery-${groupIndex}`;\n\n   // 创建布局切换器\n   const switcher = this.createLayoutSwitcher(galleryContainer.id);\n   galleryContainer.appendChild(switcher);\n\n    // 创建图库容器\n    const galleryInner = document.createElement('div');\n    galleryInner.className = 'smart-gallery';\n    galleryInner.id = `gallery-inner-${groupIndex}`;\n    galleryContainer.appendChild(galleryInner);\n\n    // 提取图片数据\n    const items = [];\n    const lightboxItems = [];\n\n    figures.forEach(figure =\u003e {\n      const img = figure.querySelector('img');\n      const caption = figure.querySelector('.image-caption');\n\n      if (img) {\n        const src = figure.getAttribute('data-image-src') || img.src;\n        const width = parseInt(figure.getAttribute('data-image-width')) || img.naturalWidth || 800;\n        const height = parseInt(figure.getAttribute('data-image-height')) || img.naturalHeight || 600;\n\n        items.push({\n          src: img.src,\n          width,\n          height,\n          aspectRatio: width / height\n        });\n\n        lightboxItems.push({\n          src: src,\n          width,\n          height,\n          alt: img.alt || '',\n          caption: caption ? caption.textContent.trim() : ''\n        });\n      }\n    });\n\n    // 替换原始图片\n    const firstFigure = figures[0];\n    firstFigure.parentNode.insertBefore(galleryContainer, firstFigure);\n    figures.forEach(figure =\u003e figure.remove());\n\n    // 初始化 SmartGallery\n    const defaultLayout = this.config.galleryOptions?.defaultLayout || this.config.galleryOptions?.defaultlayout || 'justified';\n    this.layoutManager.initialize(galleryInner, items, defaultLayout);\n\n    // 初始化 PhotoSwipe\n    let lightbox = null;\n    if (this.config.lightbox) {\n      lightbox = await this.lightboxManager.initialize(galleryContainer.id, lightboxItems);\n    }\n\n    this.galleries.push({\n      container: galleryContainer,\n      id: galleryContainer.id,\n      index: groupIndex,\n      lightbox\n    });\n  }\n\n  createLayoutSwitcher(galleryId) {\n    const switcher = document.createElement('div');\n    switcher.className = 'gallery-layout-switcher';\n    switcher.innerHTML = `\n      \u003cbutton class=\"layout-btn\" data-layout=\"justified\" title=\"Justified Layout\"\u003e\n        \u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\u003e\n          \u003crect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/\u003e\n          \u003crect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/\u003e\n          \u003crect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/\u003e\n          \u003crect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/\u003e\n        \u003c/svg\u003e\n      \u003c/button\u003e\n      \u003cbutton class=\"layout-btn\" data-layout=\"masonry\" title=\"Masonry Layout\"\u003e\n        \u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\u003e\n          \u003crect x=\"3\" y=\"3\" width=\"7\" height=\"5\"/\u003e\n          \u003crect x=\"3\" y=\"12\" width=\"7\" height=\"9\"/\u003e\n          \u003crect x=\"14\" y=\"3\" width=\"7\" height=\"9\"/\u003e\n          \u003crect x=\"14\" y=\"16\" width=\"7\" height=\"5\"/\u003e\n        \u003c/svg\u003e\n      \u003c/button\u003e\n      \u003cbutton class=\"layout-btn\" data-layout=\"grid\" title=\"Grid Layout\"\u003e\n        \u003csvg width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"\u003e\n          \u003crect x=\"3\" y=\"3\" width=\"7\" height=\"7\"/\u003e\n          \u003crect x=\"14\" y=\"3\" width=\"7\" height=\"7\"/\u003e\n          \u003crect x=\"3\" y=\"14\" width=\"7\" height=\"7\"/\u003e\n          \u003crect x=\"14\" y=\"14\" width=\"7\" height=\"7\"/\u003e\n        \u003c/svg\u003e\n      \u003c/button\u003e\n    `;\n\n    switcher.querySelectorAll('.layout-btn').forEach(btn =\u003e {\n      btn.addEventListener('click', (e) =\u003e {\n        e.stopPropagation();\n        const layout = btn.getAttribute('data-layout');\n        const innerGalleryId = galleryId.replace('gallery-', 'gallery-inner-');\n        this.layoutManager.switchLayout(innerGalleryId, layout);\n\n        switcher.querySelectorAll('.layout-btn').forEach(b =\u003e b.classList.remove('active'));\n        btn.classList.add('active');\n      });\n    });\n\n    // 设置默认激活状态\n    const defaultLayout = this.config.galleryOptions?.defaultLayout || 'justified';\n    const defaultBtn = switcher.querySelector(`[data-layout=\"${defaultLayout}\"]`);\n    if (defaultBtn) defaultBtn.classList.add('active');\n\n    return switcher;\n  }\n\n  processIndividualImages(figures) {\n    if (!this.config.lightbox) return;\n\n    figures.forEach((figure) =\u003e {\n      figure.classList.add('single-image');\n\n      const img = figure.querySelector('img');\n      const caption = figure.querySelector('.image-caption');\n\n      if (!img) return;\n\n      const src = figure.getAttribute('data-image-src') || img.src;\n      const width = parseInt(figure.getAttribute('data-image-width')) || img.naturalWidth || 800;\n      const height = parseInt(figure.getAttribute('data-image-height')) || img.naturalHeight || 600;\n\n      img.style.cursor = 'pointer';\n      img.addEventListener('click', () =\u003e {\n        const lightbox = new PhotoSwipeLightbox({\n          dataSource: [{\n            src: src,\n            width,\n            height,\n            alt: img.alt || '',\n            caption: caption ? caption.textContent.trim() : ''\n          }],\n          pswpModule: () =\u003e {\n            return new Promise((resolve) =\u003e {\n              if (window.PhotoSwipe) {\n                resolve(window.PhotoSwipe);\n              } else {\n                console.error('PhotoSwipe core module not loaded');\n                resolve(null);\n              }\n            });\n          },\n          ...this.config.lightboxOptions\n        });\n        lightbox.init();\n        lightbox.loadAndOpen(0);\n      });\n    });\n  }\n\n  destroy() {\n    this.layoutManager.destroy();\n    this.lightboxManager.destroy();\n    this.galleries = [];\n  }\n}\n\n// 初始化画廊功能\nconst imageGallery = new ImageGallery();\n\n// 导出到全局作用域\nwindow.ImageGallery = ImageGallery;"],"mappings":"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","names":[]}