{"version":3,"sources":["file:///home/heuzef/GIT/xp/xp/themes/hugo-narrow/assets/js/toc.js"],"sourcesContent":["/**\n * 目录功能模块 (Native IntersectionObserver)\n */\nclass TOCManager {\n  constructor() {\n    this.container = document.getElementById(\"toc-container\");\n    if (!this.container) return;\n    \n    this.position = this.container.dataset.position || \"center\";\n    this.headings = [];\n    this.tocLinks = [];\n    this.activeParam = null;\n    this.initialized = false;\n    \n    this.init();\n  }\n\n  init() {\n    if (this.initialized) return;\n    this.setupElements();\n    if (this.tocLinks.length === 0) return;\n    \n    this.setupObserver();\n    this.bindEvents();\n    \n    // 清理可能存在的遗留 DOM 节点以防多次加载（特别是由 PJAX/Turbo 机制等造成的重复）\n    if (this.sideIndicator) {\n      this.sideIndicator.innerHTML = \"\";\n    }\n\n    if (this.position === \"side\") {\n      this.generateSideBlocks();\n      this.updateSideBlocks();\n    }\n    \n    this.initialized = true;\n    this.exposeAPI();\n  }\n\n  setupElements() {\n    // 找出所有的相关 DOM 元素\n    Object.assign(this, {\n      centerDropdown: document.getElementById(\"toc-center-dropdown\"),\n      centerToggle: document.getElementById(\"toc-center-toggle\"),\n      centerTitle: document.getElementById(\"toc-center-title\"),\n      \n      sideIndicator: document.getElementById(\"toc-side-indicator\"),\n      sideDropdown: document.getElementById(\"toc-side-dropdown\"),\n      sideCloseBtn: document.getElementById(\"toc-side-close\")\n    });\n\n    const links = document.querySelectorAll('#toc-container nav#TableOfContents a');\n    const headingIds = [];\n    \n    links.forEach(link =\u003e {\n      this.tocLinks.push(link);\n      try {\n        const urlList = link.href.split('#');\n        const id = decodeURIComponent(urlList[urlList.length - 1]);\n        if (id) headingIds.push(id);\n      } catch (e) {\n        if (link.hash.substring(1)) headingIds.push(link.hash.substring(1));\n      }\n    });\n\n    // 找到具体的文章正文中的标题节点\n    headingIds.forEach(id =\u003e {\n      // 避免 id 内有特殊字符引发选择器问题，直接原样使用 id 取值\n      const el = document.getElementById(id);\n      if (el) {\n        this.headings.push(el);\n      }\n    });\n  }\n\n  setupObserver() {\n    // 观察器回调\n    const callback = (entries) =\u003e {\n      const visibleEntries = entries.filter(entry =\u003e entry.isIntersecting);\n      \n      if (visibleEntries.length \u003e 0) {\n        // 使用在屏幕中最靠上的标题作为当前高亮的标题\n        let topEntry = visibleEntries[0];\n        visibleEntries.forEach(entry =\u003e {\n          if (entry.boundingClientRect.top \u003c topEntry.boundingClientRect.top) {\n            topEntry = entry;\n          }\n        });\n        \n        this.setActive(topEntry.target.id);\n      }\n    };\n\n    // 配置观察器：监听视口偏上部分作为激活阈值\n    this.observer = new IntersectionObserver(callback, {\n      rootMargin: \"-20% 0px -60% 0px\",\n      threshold: [0, 1]\n    });\n\n    this.headings.forEach(heading =\u003e {\n      this.observer.observe(heading);\n    });\n  }\n  \n  setActive(id) {\n    if (!id) return;\n    this.activeParam = id;\n    const hash = '#' + id;\n    let activeText = \"\";\n    \n    this.tocLinks.forEach(link =\u003e {\n      const parentLi = link.closest('li');\n      let linkHash = \"\";\n      try {\n        const urlList = link.href.split('#');\n        linkHash = decodeURIComponent(urlList[urlList.length - 1]);\n      } catch (e) {}\n\n      if (linkHash === decodeURIComponent(id)) {\n        link.classList.add(\"active\", \"font-medium\");\n        if(parentLi) parentLi.classList.add(\"active\");\n        activeText = link.textContent;\n      } else {\n        link.classList.remove(\"active\", \"font-medium\");\n        if(parentLi) parentLi.classList.remove(\"active\");\n      }\n    });\n    \n    if (activeText) {\n      if (this.centerTitle) this.centerTitle.textContent = activeText;\n    }\n    \n    if (this.position === \"side\") {\n      this.updateSideBlocks();\n    }\n  }\n\n  generateSideBlocks() {\n    if (!this.sideIndicator) return;\n    this.sideIndicator.innerHTML = \"\"; // 强行清理已存 DOM 避免重复渲染\n    \n    this.tocLinks.forEach(link =\u003e {\n      // 通过 DOM 树的 ul 嵌套深度来推断 header 层级\n      let depth = 0;\n      let el = link.parentElement;\n      while (el \u0026\u0026 el.id !== 'TableOfContents') {\n        if (el.tagName \u0026\u0026 el.tagName.toLowerCase() === 'ul') {\n          depth++;\n        }\n        el = el.parentElement;\n      }\n      \n      const block = document.createElement(\"div\");\n      // 用不同的宽表达不同的层级，进一步减小贴紧程度\n      let widthClass = \"w-4\";\n      if (depth === 2) widthClass = \"w-3\";\n      else if (depth === 3) widthClass = \"w-2\";\n      else if (depth \u003e= 4) widthClass = \"w-1\";\n      \n      block.className = `h-1 ${widthClass} rounded-l-full rounded-r-none transition-all duration-300 bg-muted/50 block-item hover:bg-primary/60`;\n      \n      let blockHash = \"\";\n      try {\n        const urlList = link.href.split('#');\n        blockHash = urlList[urlList.length - 1];\n      } catch (e) {\n        blockHash = link.hash.substring(1);\n      }\n      block.dataset.hash = blockHash;\n      \n      block.addEventListener(\"click\", (e) =\u003e {\n        // 如果是触控设备不支持 hover，此时点击色块不应触发滚动，而是交给父级去触发展开卡块的逻辑\n        if (!window.matchMedia(\"(hover: hover)\").matches) {\n          return;\n        }\n        e.stopPropagation();\n        this.scrollToTarget(link.hash);\n      });\n      \n      this.sideIndicator.appendChild(block);\n    });\n  }\n\n  updateSideBlocks() {\n    if (!this.sideIndicator) return;\n    const blocks = this.sideIndicator.querySelectorAll(\".block-item\");\n    blocks.forEach(block =\u003e {\n      let blockHash = block.dataset.hash;\n      try { blockHash = decodeURIComponent(blockHash); } catch(e){}\n      \n      if (blockHash === decodeURIComponent(this.activeParam)) {\n        block.classList.remove(\"bg-muted/50\");\n        block.classList.add(\"bg-primary\", \"scale-x-110\", \"origin-right\");\n      } else {\n        block.classList.remove(\"bg-primary\", \"scale-x-110\", \"origin-right\");\n        block.classList.add(\"bg-muted/50\");\n      }\n    });\n  }\n\n  scrollToTarget(hash) {\n    let targetId = hash.substring(1);\n    try {\n      targetId = decodeURIComponent(targetId);\n    } catch (e) {}\n    \n    const target = document.getElementById(targetId);\n    if (target) {\n      const offsetTop = target.getBoundingClientRect().top + window.pageYOffset - 100; // 给 fixed header 留出余量\n      window.scrollTo({\n        top: offsetTop,\n        behavior: \"smooth\"\n      });\n      \n      this.closeAll();\n      // 在滚动完成之后可以尝试主动 setActive，但原生的 Observer 一般就能够监听到了\n    }\n  }\n\n  bindEvents() {\n    const toggleDropdown = (parent, dropdown) =\u003e {\n      if (!dropdown) return;\n      const isHidden = dropdown.classList.contains(\"hidden\");\n      if (isHidden) {\n        dropdown.classList.remove(\"hidden\");\n        // Trigger reflow 以激活过渡\n        void dropdown.offsetWidth;\n        dropdown.classList.remove(\"opacity-0\", \"scale-95\");\n        dropdown.classList.add(\"opacity-100\", \"scale-100\");\n      } else {\n        dropdown.classList.add(\"opacity-0\", \"scale-95\");\n        dropdown.classList.remove(\"opacity-100\", \"scale-100\");\n        setTimeout(() =\u003e {\n          dropdown.classList.add(\"hidden\");\n        }, 300); // Tailwind duration 参数预设\n      }\n    };\n\n    if (this.centerToggle) {\n      let hideTimeout = null;\n\n      this.centerToggle.addEventListener(\"click\", (e) =\u003e {\n        e.stopPropagation();\n        toggleDropdown(this.centerToggle.parentElement, this.centerDropdown);\n      });\n\n      this.centerToggle.parentElement.addEventListener(\"mouseenter\", () =\u003e {\n        if (window.matchMedia(\"(hover: hover)\").matches) {\n           clearTimeout(hideTimeout);\n           if (this.centerDropdown.classList.contains(\"hidden\")) {\n             toggleDropdown(this.centerToggle.parentElement, this.centerDropdown);\n           }\n        }\n      });\n      \n      this.centerToggle.parentElement.addEventListener(\"mouseleave\", () =\u003e {\n        if (window.matchMedia(\"(hover: hover)\").matches) {\n           hideTimeout = setTimeout(() =\u003e {\n             if (!this.centerDropdown.classList.contains(\"hidden\")) {\n               toggleDropdown(this.centerToggle.parentElement, this.centerDropdown);\n             }\n           }, 200);\n        }\n      });\n    }\n\n    // Side 模式显隐控制网络（包含 Hover 桌面端和 Click 触屏端）\n    if (this.sideIndicator \u0026\u0026 this.sideDropdown) {\n      const container = this.sideIndicator.parentElement;\n      let sideHideTimeout = null;\n      \n      const toggleSide = (forceHoverActive) =\u003e {\n        if (forceHoverActive) {\n          this.sideDropdown.classList.add(\"is-open\");\n        } else {\n          this.sideDropdown.classList.remove(\"is-open\");\n        }\n      };\n\n      // JS接管的 PC端 Hover 事件\n      container.addEventListener(\"mouseenter\", () =\u003e {\n        if (window.matchMedia(\"(hover: hover)\").matches) {\n          clearTimeout(sideHideTimeout);\n          toggleSide(true);\n        }\n      });\n\n      container.addEventListener(\"mouseleave\", () =\u003e {\n        if (window.matchMedia(\"(hover: hover)\").matches) {\n          sideHideTimeout = setTimeout(() =\u003e {\n            toggleSide(false);\n          }, 200);\n        }\n      });\n\n      // 触控端触碰展出逻辑\n      this.sideIndicator.addEventListener(\"click\", (e) =\u003e {\n        if (!window.matchMedia(\"(hover: hover)\").matches) {\n           e.stopPropagation();\n           this.sideCloseBtn?.classList.add(\"is-touch\"); // 确保移动端出现关闭按钮\n           this.sideDropdown.classList.toggle(\"is-open\");\n        }\n      });\n    }\n\n    if (this.sideCloseBtn) {\n      this.sideCloseBtn.addEventListener(\"click\", (e) =\u003e {\n        e.stopPropagation();\n        if (this.sideDropdown) {\n          this.sideDropdown.classList.remove(\"is-open\");\n        }\n      });\n    }\n\n    // 全局点击遮罩关闭逻辑\n    document.addEventListener(\"click\", (e) =\u003e {\n      let clickedInside = false;\n      if (this.centerDropdown \u0026\u0026 this.centerToggle) {\n        if (this.centerToggle.parentElement.contains(e.target)) clickedInside = true;\n      }\n      if (this.sideIndicator \u0026\u0026 this.sideDropdown) {\n         if (this.sideIndicator.parentElement.contains(e.target) || this.sideDropdown.contains(e.target)) clickedInside = true;\n      }\n      \n      if (!clickedInside) {\n        this.closeAll();\n      }\n    });\n\n    // TOC 内链接点击进行滚动绑定\n    this.container.addEventListener(\"click\", (e) =\u003e {\n      const link = e.target.closest('a');\n      if (link \u0026\u0026 link.hash) {\n        e.preventDefault();\n        this.scrollToTarget(link.hash);\n      }\n    });\n  }\n\n  closeAll() {\n    [this.centerDropdown].forEach(dropdown =\u003e {\n      if (dropdown \u0026\u0026 !dropdown.classList.contains(\"hidden\")) {\n        dropdown.classList.add(\"opacity-0\", \"scale-95\");\n        dropdown.classList.remove(\"opacity-100\", \"scale-100\");\n        setTimeout(() =\u003e {\n          dropdown.classList.add(\"hidden\");\n        }, 300);\n      }\n    });\n\n    if (this.sideDropdown \u0026\u0026 this.sideDropdown.classList.contains(\"is-open\")) {\n      this.sideDropdown.classList.remove(\"is-open\");\n    }\n  }\n\n  exposeAPI() {\n    window.TOC = {\n      toggle: () =\u003e {\n        if (this.position === \"center\" \u0026\u0026 this.centerToggle) {\n          this.centerToggle.click();\n        }\n      },\n      hide: () =\u003e this.closeAll(),\n      initialized: true\n    };\n  }\n}\n\n// 延迟初始化以获取完备 DOM 渲染\n// 为了防止由于诸如 pjax 等机制的无刷页面跳转导致的重复绑定，\n// 可以将其赋权到 window 对象下保存唯一实例\nfunction initTOC() {\n  if (window.tocManagerInstance) return;\n  \n  if (document.readyState === \"loading\") {\n    document.addEventListener(\"DOMContentLoaded\", () =\u003e {\n      if (!window.tocManagerInstance) window.tocManagerInstance = new TOCManager();\n    });\n  } else {\n    setTimeout(() =\u003e {\n      if (!window.tocManagerInstance) window.tocManagerInstance = new TOCManager();\n    }, 50);\n  }\n}\n\n// 支持 pjax 或类 pjax 的页面级完全刷新\ndocument.addEventListener(\"pjax:complete\", () =\u003e {\n    window.tocManagerInstance = null; // 重置实例\n    initTOC();\n});\n\ninitTOC();\n"],"mappings":"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","names":[]}